// https://javascript-minifier.com/
const SAVE_SEPARATOR=":",TITLE_BASE_NAME="",TITLE_UNAVAILABLE="[VIDEO UNAVAILABLE]",BASE_PAGE_TITLE="YouTube player - Namless Things",DEFAULT_VIDEOS=["dQw4w9WgXcQ","90qT9ZNy2bo","lXMskKTw3Bc","ykwqXuMPsoc","NN75im_us4k","4WgT9gy4zQA","k85mRPqvMbE","astISOttCQ0","N_x72hA7_SY","J_DV9b0x7v4","J---aiyznGQ","wGlBwW7f5HA","1wnE4vF9CQ4","p3G5IXn0K7A","QH2-TGUlwu4","q6EoRBvdVPQ","Y4QGPWLY-EM","EwTZ2xpQwpA","iEXPkv7lJgc","Z3ZAGBL6UBA","uE-1RPDqJAY","qmjOd9Dlr34","aKULi72yUko","eDU0CTDMk2g","kFF3pVOHtoA","ENnAa7rqtBM","QTqD7I3Dksw","KMYN4djSq7o","UcwfEMdV-aM","c71RCAyLS1M","HEXWRTEbj1I","5xxQs34UMx4","y6120QOlsfU","y983TDjoglQ","ZZ5LpwO-An4","TKfS5zVfGBc","thhaf-bKWyg","Ijhhe8Q_dQs","ahdH8eTydWY","UcLph-scF-0","E9s1ltPGQOo","ygI-2F8ApUM","AO6ePzKVeuE","0L_kQ_wbsAM","Oa-ae6_okmg","4zLfCnGVeL4","rvrZJ5C_Nwg","j6KnvkEPAZg","feA64wXhbjo","-1dSY6ZuXEY","4aneAWxzOUk","5FjWe31S_0g","djV11Xbc914","1vrEljMfXYo","umAL-6-j1Ew","aQkPcPqTq4M","U06jlgpMtQs","aiSdTQ9DW9g","dP9Wp6QVbsk","izGwDsrQ1eQ","PGNiXGX2nLU","Hy8kmNEo1i8","6W5pq4bIzIw","6E5m_XtCX3c","vTIIMJ9tUc8","SDklocLs8mU","K5tVbVu9Mkg","fbGkxcY7YFU","gy1B3agGNxw","kfVsfOSbJY0","9bZkp7q19f0","AZFuvVdIgSw","jofNR_WkoCE","9FISHEO3gsM","-TTgXfO7CRI","SQTcRxPsoMo","8d44ykdKvCw","tesr1OyymXo"];let player=null,currentURL=null,currentIndex=0;function setPageTitle(e){null==e&&(e='"'+document.getElementById("title"+currentIndex).innerHTML+'" on '+BASE_PAGE_TITLE),document.title=e}function playVideo(e){setActiveVideo(currentIndex,!1),setActiveVideo(currentIndex=parseInt(e,10),!0),setIndexDisplay();let t=getVideoID(document.getElementsByClassName("video")[currentIndex].id);""===t&&(t=getDefaultVideo()),player.loadVideoById(t,0,"large")}function playIndex(e){"DIV"===document.getElementById("player").tagName?(currentIndex=e,startYouTube()):playVideo(e)}function setTitleOfVideoID(e,t){let n=document.getElementsByClassName("video");for(let l=0;l<n.length;l++){if(getVideoID(n[l].id)!==e)continue;let d=n[l].parentElement.getElementsByClassName("video-title")[0];d.innerHTML!==TITLE_BASE_NAME&&d.innerHTML!==TITLE_UNAVAILABLE||(d.innerHTML=t,save())}}function plus(e){let t=findIndexOfID(e),n=document.getElementsByClassName("video").length,l=document.createElement("div");l.id="video"+n,l.classList.add("video-container");let d=document.getElementById("video"+e);d.parentNode.insertBefore(l,d.nextSibling),fillVideoContainer(l,n),t<currentIndex&&currentIndex++,setIndexDisplay()}function minus(e){let t=findIndexOfID(e),n=document.getElementById("video"+e);n.parentNode.removeChild(n),t<currentIndex&&currentIndex--,setIndexDisplay()}function fillVideoContainer(e,t){let n=document.createElement("div");n.id="index"+t,n.innerHTML="",n.classList.add("video-index"),n.classList.add("slightly-hidden");let l=document.createElement("button");l.type="button",l.innerHTML="Play",l.id="play"+t,l.addEventListener("click",()=>{playIndex(findIndexOfID(t))});let d=document.createElement("div");d.id="title"+t,d.innerHTML=TITLE_BASE_NAME,d.classList.add("slightly-hidden"),d.classList.add("video-title");let i=document.createElement("input");i.id=t,i.classList.add("video"),i.type="text",i.addEventListener("change",()=>{save(),d.innerHTML=TITLE_BASE_NAME});let a=document.createElement("button");a.type="button",a.innerHTML="+",a.id="plus"+t,a.addEventListener("click",()=>{plus(t)});let o=document.createElement("button");o.type="button",o.innerHTML="-",o.id="minus"+t,o.addEventListener("click",()=>{minus(t)}),e.appendChild(l),e.appendChild(i),e.appendChild(a),e.appendChild(o),e.appendChild(n),e.appendChild(d)}function next(e){let t=-1,n=document.getElementsByClassName("video").length;"all"===e?t=(currentIndex+1)%n:"one"===e?t=currentIndex:"none"===e&&(t=currentIndex+1),t<n&&playIndex(t)}function prev(e){let t=-1,n=document.getElementsByClassName("video").length;"all"===e?(t=currentIndex-1)<0&&(t=n-1):"one"===e?t=currentIndex:"none"===e&&(t=currentIndex-1),t>=0&&t<n&&playIndex(t)}function displayError(e){document.getElementById("error").innerHTML=e}function getVideoID(e){let t=document.getElementById(e).value;return t.startsWith("https://")?(t.includes("youtu.be/")?(t=t.substring(t.indexOf("youtu.be/")+9,t.length)).includes("?")&&(t=t.substring(0,t.indexOf("?"))):t.includes("youtube")&&(t=t.substring(t.indexOf("v=")+2,t.length)).includes("&")&&(t=t.substring(0,t.indexOf("&"))),t):t}function minimize(){let e=document.getElementsByClassName("video");for(let t=0;t<e.length;t++)e[t].value=getVideoID(e[t].id)}function reset(){null!=player&&player.stopVideo();let e=document.getElementsByClassName("video-container");for(let t=e.length-1;t>0;t--)e[t].parentElement.removeChild(e[t]);e[0].getElementsByClassName("video")[0].value="",e[0].getElementsByClassName("video-title")[0].innerHTML=TITLE_BASE_NAME,setPageTitle(TITLE_BASE_NAME),displayError(""),document.getElementById("loopType").value="all",currentIndex=0,DEFAULT_VIDEOS_INDEX=-1,setIndexDisplay(),save()}function findIndexOfID(e){let t=document.getElementsByClassName("video");for(let n=0;n<t.length;n++)if(t[n].id==e)return n;return-1}function setActiveVideo(e,t){let n=document.getElementsByClassName("video-container")[e],l=n.getElementsByTagName("button");3===l.length&&(l[2].disabled=t);let d=n.getElementsByClassName("video-title")[0];t?d.classList.add("neon"):d.classList.remove("neon")}window.addEventListener("load",()=>{setPageTitle(BASE_PAGE_TITLE);let e=document.createElement("div");e.id="video0",e.classList.add("video-container"),document.getElementById("videos").appendChild(e),fillVideoContainer(e,0),document.getElementById("minus0").style.visibility="hidden",setIndexDisplay(),document.getElementById("next").addEventListener("click",()=>{next("all")}),document.getElementById("prev").addEventListener("click",()=>{prev("all")}),document.getElementById("minimize").addEventListener("click",()=>{minimize()}),document.getElementById("reset").addEventListener("click",()=>{reset()}),document.getElementById("loopType").addEventListener("change",()=>{save()}),document.getElementById("save-titles").addEventListener("change",()=>{save()}),currentURL=new URL(window.location.href),load();let t=currentURL.searchParams.get("loop");null!=t&&["all","one","none"].includes(t)?document.getElementById("loopType").value=t:save();let n=currentURL.searchParams.get("load");null!=n&&playIndex(n)}),window.addEventListener("error",()=>{displayError("Something went wrong, please check the dev console")});let defaultVideosIndex=-1;function getDefaultVideo(){return null==currentURL.searchParams.get("DEFAULT_NO_RANDOM")?DEFAULT_VIDEOS[Math.floor(Math.random()*DEFAULT_VIDEOS.length)]:(defaultVideosIndex=(defaultVideosIndex+1)%DEFAULT_VIDEOS.length,DEFAULT_VIDEOS[defaultVideosIndex])}function setIndexDisplay(){document.getElementById("currentIndex").innerHTML="("+(parseInt(currentIndex)+1)+" / "+document.getElementsByClassName("video").length+")";let e=document.getElementsByClassName("video-index");for(let t=0;t<e.length;++t)e[t].innerHTML="#"+(t+1)}function getLoopType(){return document.getElementById("loopType").options[loopType.selectedIndex].value}function save(){currentURL.searchParams.set("loop",getLoopType());let e="",t="",n=document.getElementsByClassName("video-container");for(let l=0;l<n.length;++l)e+=getVideoID(n[l].getElementsByClassName("video")[0].id)+SAVE_SEPARATOR,t+=n[l].getElementsByClassName("video-title")[0].innerHTML+SAVE_SEPARATOR;e=e.substring(0,e.length-SAVE_SEPARATOR.length),t=t.substring(0,t.length-SAVE_SEPARATOR.length),""===e?currentURL.searchParams.delete("v"):currentURL.searchParams.set("v",e),document.getElementById("save-titles").checked&&""!==t?currentURL.searchParams.set("t",t):currentURL.searchParams.delete("t"),currentURL.searchParams.set("load",currentIndex),window.history.replaceState(null,null,currentURL.href)}function load_video(e,t,n){""!==t&&null!=t||(t=TITLE_BASE_NAME),document.getElementById(n).value=e,document.getElementById("title"+n).innerHTML=t}function load(){let e=currentURL.searchParams.get("v");if(null==e)return;let t=currentURL.searchParams.get("t");if(null==t&&(t=""),0!==(e=e.split(SAVE_SEPARATOR)).length){t=t.split(SAVE_SEPARATOR),load_video(e[0],t[0],"0");for(let n=1;n<e.length;n++)plus((n-1).toString()),load_video(e[n],t[n],n.toString())}}function startYouTube(){let e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function onPlayerReady(){playVideo(currentIndex)}function onError(e){101!==e.data&&150!==e.data||(setTitleOfVideoID(player.getVideoData().video_id,TITLE_UNAVAILABLE),next(getLoopType()))}function onPlayerStateChange(e){e.data===YT.PlayerState.ENDED?next(getLoopType()):e.data===YT.PlayerState.PLAYING&&(setTitleOfVideoID(player.getVideoData().video_id,player.getVideoData().title),setPageTitle(null),save())}function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:"390",width:"640",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onError}})}
